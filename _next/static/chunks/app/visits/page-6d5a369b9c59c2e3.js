(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{3370:function(s,e,t){Promise.resolve().then(t.bind(t,617))},617:function(s,e,t){"use strict";t.r(e),t.d(e,{default:function(){return j}});var n=t(7437),r=t(2265),i=t(5230),c=t.n(i),l=s=>{let{onClose:e,visitDetails:t,onApprove:r,onReject:i}=s;return(0,n.jsx)("div",{className:c().modal,children:(0,n.jsxs)("div",{className:c().content,onClick:s=>s.stopPropagation(),children:[(0,n.jsx)("h2",{children:"Детали посещения"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Информация о посетителях:"}),(0,n.jsx)("div",{className:c().visitorsList,children:t.visitors.map((s,e)=>(0,n.jsxs)("div",{className:c().visitorsItem,children:[(0,n.jsx)("div",{className:c().visitorId,children:(0,n.jsx)("strong",{children:e+1})}),(0,n.jsxs)("div",{className:c().info,children:[(0,n.jsx)("strong",{children:"ФИО:"})," ",s.surname," ",s.name," ",s.patronymic," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Дата рождения:"})," ",s.birthday," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Гражданство:"})," ",s.citizenship," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Регион регистрации:"})," ",s.registration_region," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Пол:"})," ",s.gender," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Паспорт:"})," ",s.passport," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Почта:"})," ",s.email," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Телефон:"})," ",s.phone," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Цель визита:"})," ",s.purpose_visit," ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"Регистрационный номер автомобиля:"})," ",s.car_plate," ",(0,n.jsx)("br",{})]})]},e))})]}),(0,n.jsxs)("div",{className:c().confirmButtons_container,children:[(0,n.jsx)("button",{className:c().confirmButtons_confirm,onClick:r,children:"Одобрить"}),(0,n.jsx)("button",{className:c().confirmButtons_cancel,onClick:i,children:"Отклонить"}),(0,n.jsx)("button",{className:c().closeButton,onClick:e,children:"Закрыть"})]})]})})},o=t(4742),a=t.n(o),d=s=>{let{message:e,onConfirm:t,onCancel:r}=s;return(0,n.jsx)("div",{className:a().modal,children:(0,n.jsxs)("div",{className:a().modalContent,children:[(0,n.jsx)("p",{children:e}),(0,n.jsxs)("div",{className:a().buttonContainer,children:[(0,n.jsx)("button",{className:a().button_confirm,onClick:t,children:"Да"}),(0,n.jsx)("button",{className:a().button_cancel,onClick:r,children:"Отмена"})]})]})})},_=t(1589),h=t.n(_),j=()=>{let[s,e]=(0,r.useState)([]),[t,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[a,_]=(0,r.useState)(!1),[j,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{let s=await fetch("/data/visitors/visitors.json");if(!s.ok)throw Error("Failed to fetch visitors data");let t=await s.json();e(t.map(s=>({...s,status:"На рассмотрении"})))}catch(s){console.error("Error fetching visitors data:",s)}})()},[]);let u=s=>{i(s)},m=s=>{switch(s){case"Одобрено":return h().approved;case"Отклонено":return h().rejected;default:return""}};return(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsxs)("div",{className:h().heading,children:[(0,n.jsx)("h1",{children:"Запросы на посещение"}),(0,n.jsxs)("label",{className:h().labelCheckbox,children:["Показывать прошлые запросы",(0,n.jsx)("input",{type:"checkbox",checked:c,onChange:()=>o(!c)})]})]}),(0,n.jsxs)("table",{className:h().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Дата запроса"}),(0,n.jsx)("th",{children:"Регион регистрации"}),(0,n.jsx)("th",{children:"Дата посещения"}),(0,n.jsx)("th",{children:"Количество посетителей"}),(0,n.jsx)("th",{children:"Детали"}),(0,n.jsx)("th",{children:"Статус"})]})}),(0,n.jsx)("tbody",{children:s.filter(s=>{let e=new Date().toISOString().split("T")[0];return!!c||s.end_date>=e}).map(s=>{var e;return(0,n.jsxs)("tr",{className:m(s.status),onClick:()=>u(s),children:[(0,n.jsx)("td",{children:s.start_date}),(0,n.jsx)("td",{children:null===(e=s.visitors[0])||void 0===e?void 0:e.registration_region}),(0,n.jsx)("td",{children:s.end_date}),(0,n.jsx)("td",{children:s.visitors.length}),(0,n.jsx)("td",{children:"Смотреть"}),(0,n.jsx)("td",{children:s.status})]},s.id)})})]}),t&&(0,n.jsx)(l,{visitDetails:t,onClose:()=>{i(null)},onApprove:()=>{x("approve"),_(!0)},onReject:()=>{x("reject"),_(!0)}}),a&&(0,n.jsx)(d,{message:"approve"===j?"Одобрить запрос?":"Отклонить запрос?",onConfirm:()=>{t&&(e(s.map(s=>s.id===t.id?{...s,status:"approve"===j?"Одобрено":"Отклонено"}:s)),i(null),_(!1))},onCancel:()=>{_(!1)}})]})}},4742:function(s){s.exports={modal:"styles_modal__8wDJZ",modalContent:"styles_modalContent__n7MJb",buttonContainer:"styles_buttonContainer__AcaQL",button_confirm:"styles_button_confirm__6k3wW",button_cancel:"styles_button_cancel__aEX69"}},5230:function(s){s.exports={modal:"styles_modal__wRCMc",content:"styles_content__BxcbN",header:"styles_header__DD4B5",closeButton:"styles_closeButton__8dZBE",visitorsItem:"styles_visitorsItem__Anhzr",visitorId:"styles_visitorId__WOCLg",confirmButtons_container:"styles_confirmButtons_container__x_LXw",confirmButtons_confirm:"styles_confirmButtons_confirm__Bm_nr",confirmButtons_cancel:"styles_confirmButtons_cancel__Qhq9j",approved:"styles_approved__S7wSj",rejected:"styles_rejected__hrYjG",pending:"styles_pending__QmcxN"}},1589:function(s){s.exports={container:"styles_container__acPbM","label-checkbox":"styles_label-checkbox__R1QwO",table:"styles_table__lregN",heading:"styles_heading__PgiBc"}}},function(s){s.O(0,[385,971,23,744],function(){return s(s.s=3370)}),_N_E=s.O()}]);